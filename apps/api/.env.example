# =============================================================================
# Kaarplus API — Environment Variables
# Copy this file to .env and fill in the values
# =============================================================================

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# Full PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/kaarplus

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
# Port the Express server listens on
PORT=4000

# Node environment: development | test | production
NODE_ENV=development

# Allowed origin for CORS requests (frontend URL)
CORS_ORIGIN=http://localhost:3000

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# Secret used to sign and verify JWTs — generate with: openssl rand -base64 32
# Must match NEXTAUTH_SECRET in the web app
JWT_SECRET=change-me-in-production

# -----------------------------------------------------------------------------
# Stripe (Payments)
# See: https://dashboard.stripe.com/apikeys
# -----------------------------------------------------------------------------
# Secret key — never expose this to the browser (starts with sk_)
STRIPE_SECRET_KEY=sk_test_...

# Webhook signing secret — from Stripe Dashboard > Webhooks
# Used to verify that webhook events are genuinely from Stripe
STRIPE_WEBHOOK_SECRET=whsec_...

# -----------------------------------------------------------------------------
# AWS S3 (Image Storage)
# See: https://s3.console.aws.amazon.com
# -----------------------------------------------------------------------------
# S3 bucket name for storing vehicle images
AWS_S3_BUCKET=kaarplus-images

# AWS region where the bucket is located (must be eu-* for GDPR compliance)
AWS_S3_REGION=eu-central-1

# AWS IAM credentials with s3:PutObject, s3:GetObject, s3:DeleteObject
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=your-secret-access-key-here

# -----------------------------------------------------------------------------
# SendGrid (Transactional Email)
# See: https://app.sendgrid.com/settings/api_keys
# -----------------------------------------------------------------------------
# SendGrid API key — starts with SG.
SENDGRID_API_KEY=SG....

# Verified sender email address (must be verified in SendGrid)
SENDGRID_FROM_EMAIL=noreply@kaarplus.ee

# Display name for outgoing emails
SENDGRID_FROM_NAME=Kaarplus

# -----------------------------------------------------------------------------
# Sentry (Error Tracking)
# -----------------------------------------------------------------------------
# Sentry Data Source Name (DSN)
SENTRY_DSN=

# -----------------------------------------------------------------------------
# Redis (Optional — for rate limiting / session caching)
# -----------------------------------------------------------------------------
# Redis connection URL — leave empty to use in-memory rate limiting
# REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Feature Flags (optional)
# -----------------------------------------------------------------------------
# Maximum active listings per individual seller (default: 5)
MAX_INDIVIDUAL_LISTINGS=5

# Image upload size limit in bytes (default: 10 MB)
MAX_IMAGE_SIZE_BYTES=10485760

# Set to "true" to disable rate limiting (useful for local E2E testing)
DISABLE_RATE_LIMIT=false
